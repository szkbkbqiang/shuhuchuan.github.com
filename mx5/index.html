<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <title>郑州日产MX5上市预热直播</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animate.css">
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script src="js/viewport.js"></script>
    
</head>
<body>
    <!-- loading -->
    <div class="loading">
        <div class="loadconter">
            <div class="loading_text">MX5幸福加载中</div>
            <div class="carbox">
                <img src="images/load_car.png" alt=""></div>
            <div class="loadarticle">
                <div class="loadingdeg" style="width: 100%;">
                </div>
            </div>
            <div class="loadtext">
                Loading... <span class="loadingnum">0</span>%
            </div>
        </div>
    </div>

    <!-- poster --> 
    <div class="posterbox">
        <div class="index_logo_top bounceInLeft animated"><img src="images/indextoplogo.png" alt=""></div>
        <div class="index_ct_slogan fadeInLeft animated4 animated"><img src="images/index_16.png" alt=""></div>
        <div class="votebox_logo">
           <img src="images/indexlogo_03.jpg" alt="">
        </div> 
    </div>
    <!-- rx-conrer-live -->
    <div class="rx-livebox">
        <div class="index_logo_top bounceInLeft animated"><img src="images/indextoplogo.png" alt=""></div>
        <div class="index_renshu  bounceInRight animated">人气：<span>299789</span></div>
        <div class="index_logo_mx5 fadeIn animated2 animated"><img src="images/indexmx5.png" alt=""></div>
        <div class="index_slogan_r fadeIn animated2 animated">
            <img class="indexsloganlive sloganlive animated" src="images/indexsloganlive.png" alt="">
            <img src="images/indexslogan.png" alt="">
        </div>
        <div class="livebox">
            <div class="livepaly fadeIn animated3 animated">
                <!-- <iframe class="livelink" id="zhibo_link" src="vedio.html" width="345" height="194"
                    frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no">
                </iframe> -->
                <img src="images/indexlive.png" alt="">
            </div>
        </div>
        <div class="index_ct_slogan fadeInLeft animated4 animated"><img src="images/index_16.png" alt=""></div>
        <div class="index_btn_box">
            <a class="caraus_btn_left bounceInUp animated6 animated" href="javascript:;">车型亮点</a>
            <a class="reserve_btn_left  bounceInUp animated6 animated" href="javascript:;">驾享幸福</a>
        </div>
        <div class="votebox_logo">
            <img class="fadeIn animated2 animated" src="images/indexlogo_03.jpg" alt="">
        </div>  
    </div>
    <!-- car start -->
    <div class="carausbox">
        <a class="close_btn_tab" href="javascript:;"><img src="images/closeicon_03.png" alt=""></a>
        <div id="slideBox" class="slideBox">
            <div class="bd">
              
                <ul>
                    <li>
                        <a class="pic" href="javascript:;">
                            <img src="images/indextabimg1_03.jpg" alt="">
                        </a>
                    </li>
                    <li>
                        <a class="pic" href="javascript:;">
                            <img src="images/indextabimg3_03.jpg" alt="">
                        </a>
                    </li>
                    <li>
                        <a class="pic" href="javascript:;">
                            <img src="images/indextabimg2_03.jpg" alt="">
                        </a>
                    </li>
                </ul>
                
            </div>
            <div class="hd">
                <ul>
                    <li class="">1</li>
                    <li class="">2</li>
                    <li class="on">3</li>
                </ul>
            </div>
        </div>        
    </div>
    <!-- reserve start -->
    <div class="reservebox">
        <div class="reser_top">
            <p class="back_btn"><a href="javascript:;">< 返回</a></p>
            <p><img src="images/form_text_logo_03.png" alt=""></p>
        </div>
        <div class="reservelist">
            <p class="form_text_tile">选择离您最近的经销商，留下您的联系方式预约试驾</p>
            <ul>
                <li>
                    <input type="text" class="LoginName input_text" id="user_name" name="user_name" placeholder="姓名">
                    <span class="input_text sex_select_box">
                        <span>性别</span>
                        <select class="reg_select" id="sex_select" name="sex_select" value="">
                            <option value="-1">性别</option>
                            <option value="1">男</option>
                            <option value="2">女</option>
                        </select>
                    </span>
                </li>
                <li>
                    <input type="tel" id="user_phone" name="user_phone" class="LoginPhone input_text" placeholder="手机号码">
                </li>
                <li>
                    <span class="input_text province_select_box">
                        <span>省份</span>
                        <select class="reg_select" id="province_select" name="province_select">
                            <option value="-1">省份</option>
                            <option value="1">北京</option>
                        </select>
                    </span>
                     <span class="input_text city_select_box">
                        <span>城市</span>
                        <select class="reg_select" id="city_select" name="city_select">
                            <option value="-1">城市</option>
                            <option value="1">北京</option>
                        </select>
                    </span>
                </li>
                <li>
                    <span class="input_text pin_select">
                        <span>选择经销商</span>
                        <select class="reg_select dealer" id="pin_select" name="pin_select">
                            <option value="-1">选择经销商</option>
                            <option value="1">mx5朝阳专卖店</option>
                        </select>
                    </span>  
                </li>
                <li><a class="reservesubmit denging" href="javascript:;">提交</a></li>
            </ul>
        </div>
    </div>
    <script type="text/javascript">
        var timer = null;
        var unnum = 0;
        timer = setInterval(function () {
            unnum += parseInt(Math.random() * 20);
            if (unnum > 95) {
                unnum = 95;
                clearInterval(timer);
            }
            $('.loadingdeg').css('transform', 'translate3d(' + unnum + '%,0,0)');
            $('.carbox').css('transform', 'translate3d(' + unnum + '%,0,0)');
            $('.loadingnum').html(unnum);
        }, 100);
        function hengshuping() {
            if (window.orientation == 90 || window.orientation == -90) {
                alert("横屏体验不是很好，请将手机竖过来操作");
            }
        }
        window.addEventListener("onorientationchange" in window ? "orientationchange" : "resize", hengshuping, false);
        window.onload = function () {
            clearInterval(timer);
            $('.loadingdeg').css('transform', 'translate3d(' + 100 + '%,0,0)');
            $('.carbox').css('transform', 'translate3d(' + 100 + '%,0,0)');
            $('.loadingnum').html(100);
            setTimeout(function () {
                $('.loading').hide();
            }, 1500);
            setTimeout(function () {
                $('.posterbox').show();
                setTimeout(function () {
                    $('.posterbox').hide();
                    $('.rx-livebox').show();
                }, 5000);
            }, 1500);
        };

        $(function () {
            var _touchslide = null;
            var _isbok = true;
            $('.caraus_btn_left').on('touchstart',function(){
                //  车型table切换
                $('.carausbox').css('display','block');
                if(_isbok){
                    _touchslide = TouchSlide({
                        slideCell: "#slideBox",
                        titCell: ".hd ul", //开启自动分页 autoPage:true ，此时设置 titCell 为导航元素包裹层
                        mainCell: ".bd ul",
                        effect: "leftLoop",
                        interTime: 5000,
                        delayTime: 1000,
                        autoPage: true, //自动分页
                        autoPlay: true //自动播放
                     });
                }
                _isbok = false;
                setTimeout(function(){
                    $('.carausbox').addClass('left_translate');
                }, 200)                
            });

            $('.reserve_btn_left').on('touchstart',function(){
                $('.reservebox').css('display','block');
                setTimeout(function(){
                    $('.reservebox').addClass('left_translate');
                }, 200)    
            });

            $('.close_btn_tab').on('touchstart',function(){
                $('.carausbox').removeClass('left_translate');
                setTimeout(function(){
                    $('.carausbox').css('display','none');;
                }, 600)
            });

             $('.back_btn').on('touchstart',function(){
                $('.reservebox').removeClass('left_translate');
                setTimeout(function(){
                    $('.reservebox').css('display','none');;
                }, 600)
            });
            

            // 下拉选择
            $('.reg_select').on('change',function(){
                $(this).parent().find('span').text($(this).find("option:selected").text());
            });

            // 提交预约表单
            $('.reservesubmit').on('touchstart',function(){
                var user_name = $.trim($('#user_name').val());
                var user_sex = $('#sex_select').val();
                var user_phone = $('#user_phone').val();
                var user_province = $('#province_select').val();
                var user_city = $('#city_select').val();
                var user_pin = $('#pin_select').val();
                var phone_reg = /^0?1[3|4|5|8][0-9]\d{8}$/;
                if(isform()){
                    $.ajax({
                        url: 'data/formjson.json',
                        type: 'POST',
                        dataType: 'json',
                        data: {'user_name': user_name,'user_sex':user_sex,'user_phone':user_phone,'user_province':user_province,'user_city':user_city,'user_pin':user_pin},
                        success : function(data) {
                            console.log(data);
                            if(data.error_code == 1){
                                alert(data.error_msg);
                            }else{
                                alert(data.error_msg);
                            }
                        },
                        error : function() {
                            alert("服务器连接失败,请重新提交");
                        }
                    });                    
                }      
                // 验证
                function isform(){  
                    if(!user_name){
                        alert('姓名不能为空');
                        return false;
                    }
                    if(user_sex < 0){
                        alert('请选择性别');
                        return false;
                    }
                    if(!user_phone){
                        alert('手机号码不能为空');
                        return false;
                    }
                    if (!phone_reg.test(user_phone)) {
                        alert('手机号码输入有误');
                        return false;
                    }
                    if(user_province < 0){
                        alert('请选择省份');
                        return false;
                    }
                    if(user_city < 0){
                        alert('请选择城市');
                        return false;
                    }
                    if(user_pin < 0){
                        alert('请选择经销商');
                        return false;
                    }
                    return true;
                };   
                       
            });            
        });  
    </script>
    
</body>
</html>
